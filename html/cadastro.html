<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro - Universo dos Livros</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>Universo dos Livros</h1>
  <nav>
    <ul class="menu">
      <li><a href="index.html">Home</a></li>
      <li><a href="catalogo.html">Catálogo</a></li>
      <li><a href="pedidos.html">Pedidos</a></li>
      <li><a href="cadastro.html">Cadastro</a></li>
      <li><a href="login.html">Login</a></li>
      <li><a href="carrinho.html">Carrinho</a></li>
    </ul>
  </nav>
</header>

<main>
  <h2>Cadastro de Usuário</h2>
  <form id="cadastroForm">
    <label>Nome:</label>
    <input type="text" id="nome" required>
    <label>CPF:</label>
    <input type="text" id="cpf" required>
    <label>Telefone:</label>
    <input type="tel" id="telefone" required>
    <label>Email:</label>
    <input type="email" id="email" required>
    <label>Senha:</label>
    <input type="password" id="senha" required>
    <label>Endereço:</label>
    <input type="text" id="endereco" required>
    <label>Sexo:</label>
    <select id="sexo" required>
      <option value="">Selecione</option>
      <option value="masculino">Masculino</option>
      <option value="feminino">Feminino</option>
      <option value="outro">Outro</option>
    </select>
    <button type="submit">Cadastrar</button>
  </form>
</main>

<footer>&copy; 2025 Universo dos Livros</footer>

<script>
document.getElementById('cadastroForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const usuario = {
    nome: document.getElementById('nome').value,
    cpf: document.getElementById('cpf').value,
    telefone: document.getElementById('telefone').value,
    email: document.getElementById('email').value,
    senha: document.getElementById('senha').value,
    endereco: document.getElementById('endereco').value,
    sexo: document.getElementById('sexo').value
  };

  const res = await fetch('/api/cadastro', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(usuario)
  });

  const data = await res.json();
  if(data.success){
    alert('Cadastro realizado com sucesso! Faça login.');
    window.location.href = 'login.html';
  } else {
    alert('Erro: ' + data.error);
  }
});
</script>
</body>
</html>
